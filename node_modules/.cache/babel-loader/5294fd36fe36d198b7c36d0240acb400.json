{"ast":null,"code":"var _jsxFileName = \"/home/avinash/Downloads/Enablex/src/pages/Room.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport './room.css';\nlet EnxRtc = window.EnxRtc;\nlet EnxWb = window.EnxWb;\nexport default function Room(props) {\n  let canvasStarted = false;\n  let presentationStarted = false; // Player Options\n\n  let player_options = {\n    \"player\": {\n      \"autoplay\": \"\",\n      // Enum: autoplay (default)\n      \"name\": \"\",\n      // Use stream.attributes.name preferably\n      \"nameDisplayMode\": \"\",\n      // Enum: auto (default), on, off\n      \"frameFitMode\": \"\",\n      // Enum: bestFit (default), coverMax\n      \"skin\": \"default\",\n      // Enum: default (default)\n      \"class\": \"\" // Custom CSS Class Name\n\n    },\n    toolbar: {\n      'displayMode': false\n    }\n  };\n  let {\n    token\n  } = useParams();\n  let ATList = [];\n  let audio_muted = false;\n  let video_muted = false;\n  let video_type = \"SD\";\n  let room = null;\n  let SubscribedStreamMap = new Map();\n  let localStream,\n      remote_view,\n      sAMute = true,\n      sVMute = true,\n      rAmute = true,\n      rVMute = true;\n  let optionsLocal;\n  let remoteOptions;\n  let isModerator;\n  let VideoSize = {\n    'HD': [320, 180, 1280, 720],\n    'SD': [640, 480, 640, 480],\n    'LD': [80, 45, 640, 360]\n  };\n  let config = {\n    video: true,\n    audio: true,\n    data: true,\n    videoSize: VideoSize[video_type]\n  };\n  optionsLocal = {\n    player: {\n      height: \"150px\",\n      width: \"150px\",\n      minHeight: \"150px\",\n      minWidth: \"150px\"\n    },\n    toolbar: {\n      displayMode: false\n    },\n    resizer: false\n  };\n  remoteOptions = {\n    player: {\n      height: \"100%\",\n      width: \"100%\"\n    },\n    resizer: false,\n    toolbar: {\n      displayMode: false\n    }\n  };\n  useEffect(() => {\n    joinRoom();\n  }, []);\n\n  let enableMuteButton = muteUnmuteBtn => {\n    muteUnmuteBtn.removeAttribute(\"disabled\");\n    muteUnmuteBtn.style.cursor = \"pointer\";\n    muteUnmuteBtn.style.pointerEvents = \"auto\";\n  };\n\n  let joinRoom = () => {\n    console.log('joining the room...');\n    document.querySelector(\"#local_view\").classList.add(\"local_class_peep\");\n    document.querySelector(\"#remote_view\").classList.add(\"remote_class_peep\");\n    let muteUnmuteBtn = document.querySelector(\"#self_vMute\");\n    EnxRtc.Logger.setLogLevel(0);\n    localStream = EnxRtc.joinRoom(token, config, function (success, error) {\n      if (error && error == null) {\n        document.querySelector(\".error_div\").innerHTML = \"Room connection error.\" + error.message;\n      } // if room connects successfully\n\n\n      if (success && success !== null) {\n        //play local view\n        localStream.play(\"self-view\", optionsLocal); // assigning room object to a variable\n\n        room = success.room;\n        console.log(\"roomsetting:\", success, success.room); // check if the user joined as moderator or participant\n\n        isModerator = room.me.role === \"moderator\" ? true : false;\n        var ownId = success.publishId;\n\n        for (var i = 0; i < success.streams.length; i++) {\n          room.subscribe(success.streams[i]);\n        } // Active talkers handling\n\n\n        room.addEventListener(\"active-talkers-updated\", function (event) {\n          console.log(\"Active Talker List :- \" + JSON.stringify(event));\n          var video_player_len = document.querySelector(\"#call_div\").childNodes;\n          ATList = event.message.activeList;\n\n          if (event.message && event.message !== null && event.message.activeList && event.message.activeList !== null) {\n            if (ATList.length === 0) {\n              document.querySelector(\"#call_div\").innerHTML = \"\";\n              document.querySelector(\".remote-name\").innerText = \"\";\n            }\n\n            if (SubscribedStreamMap.size > 0) {\n              if (video_player_len.length >= 1) {\n                return;\n              } else {\n                for (var stream in room.remoteStreams.getAll()) {\n                  var st = room.remoteStreams.getAll()[stream];\n\n                  for (var j = 0; j < ATList.length; j++) {\n                    if (ATList[j].streamId === st.getID()) {\n                      remote_view = st;\n                      document.querySelector(\".self-name\").innerHTML = room.me.name;\n                      st.play(\"call_div\", remoteOptions);\n                      document.querySelector(\".remote-name\").innerHTML = ATList[j].name;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        });\n        room.addEventListener(\"canvas-started\", function (data) {\n          console.log(\"canvas-started\");\n\n          if (data.message.clientId != room.me.clientId) {\n            canvasStarted = true;\n            presentationStarted = true;\n            var stream_id = data.message.streamId;\n            var st = room.remoteStreams.get(stream_id);\n            st.play(\"canvasStreamPlayer\", player_options);\n            document.querySelector(\"#canvasStreamPlayer\").style.border = \"1px solid red\";\n          }\n        }); // room recording start  notification\n\n        room.addEventListener(\"room-record-on\", function () {\n          document.querySelector(\"#rec_notification\").style.display = 'block';\n        }); // room recording stop  notification\n\n        room.addEventListener(\"room-record-off\", function () {\n          document.querySelector(\"#rec_notification\").style.display = 'none';\n        });\n        room.addEventListener(\"stream-subscribed\", function (streamEvent) {\n          if (streamEvent.stream.getID() !== ownId) {\n            SubscribedStreamMap.set(streamEvent.stream.getID(), streamEvent.stream);\n          }\n        }); // user disconnection notification\n\n        room.addEventListener(\"user-disconnected\", function (streamEvent) {\n          document.querySelector(\"#call_div\").innerHTML = \"\";\n          document.querySelector(\".remote-name\").innerText = \"\";\n        }); // room disconnected notification\n\n        room.addEventListener(\"room-disconnected\", function (streamEvent) {\n          window.location.href = \"/\";\n        });\n      }\n    }); // self stream audio mute/unmute  function\n\n    document.querySelector(\"#self_aMute\").addEventListener('click', function (e) {\n      if (audio_muted) {\n        if (room.mute) {\n          console.log(\"Your audio is muted by moderator\");\n        } else {\n          localStream.unmuteAudio(function (arg) {\n            document.querySelector(\"#self_aMute\").classList.remove(\"fa-microphone-slash\");\n            document.querySelector(\"#self_aMute\").classList.add(\"fa-microphone\");\n            audio_muted = false;\n          });\n        }\n      } else {\n        localStream.muteAudio(function (arg) {\n          document.querySelector(\"#self_aMute\").classList.remove(\"fa-microphone\");\n          document.querySelector(\"#self_aMute\").classList.add(\"fa-microphone-slash\");\n          audio_muted = true;\n        });\n      }\n    }); //Canvas streaming\n\n    document.querySelector(\"#whiteboard_btn\").addEventListener('click', function (e) {\n      if (canvasStarted == false) {\n        let wb = new EnxWb({\n          canvasId: 'wb',\n          // id of the canvas \n          initialWidth: 1000,\n          initialHeight: 1000,\n          scheme: 'custom',\n          custom: {\n            bgColor: 'red',\n\n            /* WB Backbround */\n            toolbarBGColor: 'black',\n\n            /* Toolbar Background */\n            brushColor: 'black',\n\n            /* Default Brush Color */\n            icon: {\n              /* Toolbar Icon definition */\n              size: 'medium',\n\n              /* Enum: small,large,medium */\n              type: 'rounded-square',\n\n              /* Enum:  square,rounded-square */\n              BGColor: '#f3f3f3',\n\n              /* Tool Background */\n              FGColor: '#000000',\n\n              /* Tool Foreground */\n              border: '1px solid grey'\n              /* Tool Border */\n\n            }\n          }\n        });\n        wb.create(room);\n        wb.startStreaming();\n        wb.startCollaboration();\n        room.addEventListener(\"user-connected\", function (event) {\n          var clientId = event.clientId;\n          wb.shareWith(clientId);\n        });\n      }\n    });\n    document.querySelector(\"#disconnect_call\").addEventListener(\"click\", function () {\n      room.disconnect();\n    });\n    document.querySelector('#mute_video').addEventListener('click', function () {\n      muteUnmuteBtn.style.cursor = \"wait\";\n      muteUnmuteBtn.style.pointerEvents = \"none\";\n      muteUnmuteBtn.disabled = true;\n      muteUnmuteBtn.setAttribute(\"disabled\", \"disabled\");\n\n      if (video_muted) {\n        localStream.unmuteVideo(function (res) {\n          if (res.result === 0) {\n            document.querySelector(\"#self_vMute\").classList.remove(\"fa-video-slash\");\n            document.querySelector(\"#self_vMute\").classList.add(\"fa-video\");\n            video_muted = false;\n            enableMuteButton(muteUnmuteBtn);\n          } else if (res.result === 1140) {\n            console.error(res.error);\n            enableMuteButton(muteUnmuteBtn);\n          }\n        });\n      } else {\n        localStream.muteVideo(function (res) {\n          if (res.result === 0) {\n            document.querySelector(\"#self_vMute\").classList.remove(\"fa-video\");\n            document.querySelector(\"#self_vMute\").classList.add(\"fa-video-slash\");\n            video_muted = true;\n            enableMuteButton(muteUnmuteBtn);\n          } else if (res.result === 1140) {\n            enableMuteButton(muteUnmuteBtn);\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"layout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"overlay\",\n    style: {\n      'display': 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loader\",\n    style: {\n      \"width\": \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./img/loading.gif\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row p-0 m-0\",\n    id: \"call_container_div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"main-container\",\n    className: \"enx-layout-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    id: \"wb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 5\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"canvasStreamPlayer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 8\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"local_class_peep\",\n    id: \"local_view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"self-view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"self-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 29\n    }\n  }, \"Local User\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"remote_class_peep\",\n    id: \"remote_view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"call_div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"show_stream_div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"remote-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 29\n    }\n  }, \"Remote User\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toolbar-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tools\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mute-icon\",\n    id: \"mute_audio\",\n    title: \"Mute/Unmute Audio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-microphone\",\n    id: \"self_aMute\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-mute-icon\",\n    id: \"mute_video\",\n    title: \"Mute/Unmute Video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-video\",\n    id: \"self_vMute\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-mute-icon\",\n    id: \"whiteboard_btn\",\n    title: \"Start Whiteboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-desktop fa-fw SSicon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video-mute-icon end-call\",\n    title: \"End Call\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-phone fa-fw CBicon\",\n    id: \"disconnect_call\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 37\n    }\n  }))))))));\n}","map":{"version":3,"sources":["/home/avinash/Downloads/Enablex/src/pages/Room.js"],"names":["React","useState","useEffect","useParams","EnxRtc","window","EnxWb","Room","props","canvasStarted","presentationStarted","player_options","toolbar","token","ATList","audio_muted","video_muted","video_type","room","SubscribedStreamMap","Map","localStream","remote_view","sAMute","sVMute","rAmute","rVMute","optionsLocal","remoteOptions","isModerator","VideoSize","config","video","audio","data","videoSize","player","height","width","minHeight","minWidth","displayMode","resizer","joinRoom","enableMuteButton","muteUnmuteBtn","removeAttribute","style","cursor","pointerEvents","console","log","document","querySelector","classList","add","Logger","setLogLevel","success","error","innerHTML","message","play","me","role","ownId","publishId","i","streams","length","subscribe","addEventListener","event","JSON","stringify","video_player_len","childNodes","activeList","innerText","size","stream","remoteStreams","getAll","st","j","streamId","getID","name","clientId","stream_id","get","border","display","streamEvent","set","location","href","e","mute","unmuteAudio","arg","remove","muteAudio","wb","canvasId","initialWidth","initialHeight","scheme","custom","bgColor","toolbarBGColor","brushColor","icon","type","BGColor","FGColor","create","startStreaming","startCollaboration","shareWith","disconnect","disabled","setAttribute","unmuteVideo","res","result","muteVideo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n    useParams\n} from \"react-router-dom\";\nimport './room.css'\nlet EnxRtc = window.EnxRtc;\nlet EnxWb = window.EnxWb;\n\nexport default function Room(props) {\n    let canvasStarted = false;\n    let presentationStarted = false;\n    // Player Options\nlet player_options = {\n    \"player\": {\n        \"autoplay\": \"\",     // Enum: autoplay (default)\n        \"name\": \"\",         // Use stream.attributes.name preferably\n        \"nameDisplayMode\": \"\",  // Enum: auto (default), on, off\n        \"frameFitMode\": \"\", // Enum: bestFit (default), coverMax\n        \"skin\":\"default\",   // Enum: default (default)\n        \"class\": \"\"       // Custom CSS Class Name\n    },\n    toolbar: {\n        'displayMode': false,\n    }\n};\n    let { token } = useParams();\n    let ATList = [];\n    let audio_muted = false;\n    let video_muted = false;\n    let video_type = \"SD\";\n\n    let room = null;\n    let SubscribedStreamMap = new Map();\n    let localStream,\n        remote_view,\n        sAMute = true,\n        sVMute = true,\n        rAmute = true,\n        rVMute = true;\n\n    let optionsLocal;\n    let remoteOptions;\n    let isModerator;\n    let VideoSize = {\n        'HD': [320, 180, 1280, 720],\n        'SD': [640, 480, 640, 480],\n        'LD': [80, 45, 640, 360]\n    };\n    let config = {\n        video: true,\n        audio: true,\n        data: true,\n        videoSize: VideoSize[video_type],\n    };\n\n    optionsLocal = {\n        player: {\n            height: \"150px\",\n            width: \"150px\",\n            minHeight: \"150px\",\n            minWidth: \"150px\",\n        },\n        toolbar: {\n            displayMode: false,\n        },\n        resizer: false,\n    };\n    remoteOptions = {\n        player: {\n            height: \"100%\",\n            width: \"100%\",\n        },\n        resizer: false,\n        toolbar: {\n            displayMode: false,\n        },\n    };\n\n    useEffect(() => {\n        joinRoom()\n    }, []);\n\n\n    let enableMuteButton = (muteUnmuteBtn) => {\n        muteUnmuteBtn.removeAttribute(\"disabled\");\n        muteUnmuteBtn.style.cursor = \"pointer\";\n        muteUnmuteBtn.style.pointerEvents = \"auto\";\n    }\n\n\n    let joinRoom = () => {\n        console.log('joining the room...');\n        document.querySelector(\"#local_view\").classList.add(\"local_class_peep\");\n        document.querySelector(\"#remote_view\").classList.add(\"remote_class_peep\");\n        let muteUnmuteBtn = document.querySelector(\"#self_vMute\");\n        EnxRtc.Logger.setLogLevel(0);\n        localStream = EnxRtc.joinRoom(token, config, function (success, error) {\n\n            if (error && error == null) {\n                document.querySelector(\".error_div\").innerHTML = \"Room connection error.\" + error.message;\n            }\n            // if room connects successfully\n            if (success && success !== null) {\n\n                //play local view\n                localStream.play(\"self-view\", optionsLocal);\n\n                // assigning room object to a variable\n                room = success.room;\n\t\tconsole.log(\"roomsetting:\",success,success.room);\n                // check if the user joined as moderator or participant\n                isModerator = room.me.role === \"moderator\" ? true : false;\n                var ownId = success.publishId;\n                for (var i = 0; i < success.streams.length; i++) {\n                    room.subscribe(success.streams[i]);\n                }\n\t\t\n\n\n                // Active talkers handling\n                room.addEventListener(\"active-talkers-updated\", function (event) {\n                    console.log(\"Active Talker List :- \" + JSON.stringify(event));\n                    var video_player_len = document.querySelector(\"#call_div\").childNodes;\n\n                    ATList = event.message.activeList;\n\n                    if (\n                        event.message &&\n                        event.message !== null &&\n                        event.message.activeList &&\n                        event.message.activeList !== null\n                    ) {\n                        if (ATList.length === 0) {\n                            document.querySelector(\"#call_div\").innerHTML = \"\";\n                            document.querySelector(\".remote-name\").innerText = \"\";\n                        }\n                        if (SubscribedStreamMap.size > 0) {\n\n                            if (video_player_len.length >= 1) {\n                                return;\n                            } else {\n                                for (var stream in room.remoteStreams.getAll()) {\n                                    var st = room.remoteStreams.getAll()[stream];\n                                    for (var j = 0; j < ATList.length; j++) {\n                                        if (ATList[j].streamId === st.getID()) {\n                                            remote_view = st;\n                                            document.querySelector(\".self-name\").innerHTML = room.me.name;\n                                            st.play(\"call_div\", remoteOptions);\n                                            document.querySelector(\".remote-name\").innerHTML = ATList[j].name;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                });\n\n\t\t\n                room.addEventListener(\"canvas-started\",function(data){\n\t\t\tconsole.log(\"canvas-started\");\n                      if(data.message.clientId != room.me.clientId)\n                      {\n                        canvasStarted = true;\n                        presentationStarted = true;\n                        var stream_id = data.message.streamId;\n                        var st = room.remoteStreams.get(stream_id);\n                        st.play(\"canvasStreamPlayer\",player_options);\n                        document.querySelector(\"#canvasStreamPlayer\").style.border = \"1px solid red\";\n                      }\n\t\t});\n                      \n\n                // room recording start  notification\n                room.addEventListener(\"room-record-on\", function () {\n                    document.querySelector(\"#rec_notification\").style.display = 'block';\n                });\n                // room recording stop  notification\n                room.addEventListener(\"room-record-off\", function () {\n                    document.querySelector(\"#rec_notification\").style.display = 'none';\n                });\n\n                room.addEventListener(\"stream-subscribed\", function (streamEvent) {\n                    if (streamEvent.stream.getID() !== ownId) {\n                        SubscribedStreamMap.set(\n                            streamEvent.stream.getID(),\n                            streamEvent.stream\n                        );\n                    }\n                });\n\n\n                // user disconnection notification\n                room.addEventListener(\"user-disconnected\", function (streamEvent) {\n                    document.querySelector(\"#call_div\").innerHTML = \"\";\n                    document.querySelector(\".remote-name\").innerText = \"\";\n                });\n                // room disconnected notification\n                room.addEventListener(\"room-disconnected\", function (streamEvent) {\n                    window.location.href = \"/\";\n                });\n\n\n\n            }\n        });\n\n        // self stream audio mute/unmute  function\n        document.querySelector(\"#self_aMute\").addEventListener('click', function (e) {\n            if (audio_muted) {\n                if (room.mute) {\n                    console.log(\"Your audio is muted by moderator\");\n                } else {\n                    localStream.unmuteAudio(function (arg) {\n                        document.querySelector(\"#self_aMute\").classList.remove(\"fa-microphone-slash\");\n                        document.querySelector(\"#self_aMute\").classList.add(\"fa-microphone\");\n                        audio_muted = false;\n                    });\n                }\n            } else {\n                localStream.muteAudio(function (arg) {\n                    document.querySelector(\"#self_aMute\").classList.remove(\"fa-microphone\");\n                    document.querySelector(\"#self_aMute\").classList.add(\"fa-microphone-slash\");\n                    audio_muted = true;\n                });\n            }\n        });\n\n\t\n\t//Canvas streaming\n        document.querySelector(\"#whiteboard_btn\").addEventListener('click', function (e) {    \n\tif(canvasStarted == false){\n\t\tlet wb  =  new EnxWb(\n\t{\tcanvasId: 'wb', // id of the canvas \n\t\tinitialWidth: 1000,\n\t\tinitialHeight: 1000,\n\t\tscheme : 'custom',\n\t\tcustom: {\n\t\t\tbgColor : 'red',\t\t/* WB Backbround */\n\t\t\ttoolbarBGColor : 'black',\t/* Toolbar Background */\n\t\t\tbrushColor:'black',\t\t/* Default Brush Color */\n\t\t\ticon : {\t\t\t/* Toolbar Icon definition */\n\t\t\t\tsize: 'medium', /* Enum: small,large,medium */\n\t\t\t\ttype: 'rounded-square', /* Enum:  square,rounded-square */\n\t\t\t\tBGColor: '#f3f3f3',\t/* Tool Background */\n\t\t\t\tFGColor: '#000000',\t/* Tool Foreground */\n\t\t\t\tborder: '1px solid grey'/* Tool Border */\n\t\t\t}\n\t\t}\n\t}\n        \t);\n                    wb.create(room);\n\t\t   wb.startStreaming();\n                    wb.startCollaboration();\n                   room.addEventListener(\"user-connected\",function(event){\n                       var clientId = event.clientId;\n                       wb.shareWith(clientId);\n                   })\n\t\t}\n        });\n\n\n\n\n        document.querySelector(\"#disconnect_call\").addEventListener(\"click\", function () {\n            room.disconnect();\n        });\n\n        document.querySelector('#mute_video').addEventListener('click', function () {\n            muteUnmuteBtn.style.cursor = \"wait\";\n            muteUnmuteBtn.style.pointerEvents = \"none\";\n            muteUnmuteBtn.disabled = true;\n            muteUnmuteBtn.setAttribute(\"disabled\", \"disabled\");\n\n            if (video_muted) {\n                localStream.unmuteVideo(function (res) {\n                    if (res.result === 0) {\n                        document.querySelector(\"#self_vMute\").classList.remove(\"fa-video-slash\");\n                        document.querySelector(\"#self_vMute\").classList.add(\"fa-video\");\n                        video_muted = false;\n                        enableMuteButton(muteUnmuteBtn);\n                    } else if (res.result === 1140) {\n                        console.error(res.error);\n                        enableMuteButton(muteUnmuteBtn);\n                    }\n                });\n            } else {\n                localStream.muteVideo(function (res) {\n                    if (res.result === 0) {\n                        document.querySelector(\"#self_vMute\").classList.remove(\"fa-video\");\n                        document.querySelector(\"#self_vMute\").classList.add(\"fa-video-slash\");\n                        video_muted = true;\n                        enableMuteButton(muteUnmuteBtn);\n                    } else if (res.result === 1140) {\n                        enableMuteButton(muteUnmuteBtn);\n                    }\n                });\n            }\n        });\n\n    }\n\n    return (\n        <div>\n            <div className=\"layout\">\n                <div id=\"overlay\" style={{ 'display': 'none' }}>\n                    <div className=\"loader\" style={{ \"width\": \"50px\" }}>\n                        <img src=\"./img/loading.gif\" alt=\"\" />\n                    </div>\n                </div>\n\n                <div className=\"container\" >\n                    <div className=\"row p-0 m-0\" id=\"call_container_div\">\n\t\t\t<div className=\"\">\n\t\t\t<div className=\"col-md-9\">\n\t\t\t    <div id=\"main-container\" className=\"enx-layout-container\">\n\t\t\t\t<canvas id=\"wb\"></canvas>\n\t\t\t    </div>\n\t\t\t</div>\n\t\t\t<div className=\"col-md-3\">\n\t\t\t    <div id=\"canvasStreamPlayer\"></div>\n\t\t\t</div>\n\t\t    \t</div>\n\n                        <div className=\"local_class_peep\" id=\"local_view\">\n                            <div id=\"self-view\"></div>\n                            <div className=\"self-name\">Local User</div>\n                        </div>\n\n                        <div className=\"remote_class_peep\" id=\"remote_view\">\n                            <div id=\"call_div\"></div>\n                            <div id=\"show_stream_div\"></div>\n                            <div className=\"remote-name\">Remote User</div>\n                        </div>\n\n                        <div className=\"toolbar-buttons\">\n                            <div className=\"tools\">\n                                <div className=\"mute-icon\" id=\"mute_audio\" title=\"Mute/Unmute Audio\">\n                                    <i className=\"fa fa-microphone\" id=\"self_aMute\"></i>\n                                </div>\n                                <div className=\"video-mute-icon\" id=\"mute_video\" title=\"Mute/Unmute Video\">\n                                    <i className=\"fa fa-video\" id=\"self_vMute\"></i>\n                                </div>\n                                <div className=\"video-mute-icon\" id=\"whiteboard_btn\" title=\"Start Whiteboard\">\n                                    <i className=\"fa fa-desktop fa-fw SSicon\"></i>\n                                </div>\n                                {/* <div className=\"video-mute-icon\" id=\"toggle_chat\" title=\"Chat\">\n                                    <i className=\"fas fa-comment-dots fa-fw CBicon\" ></i>\n                                    <span className=\"tag tag-danger top\" id=\"chat-tag\">&nbsp;</span>\n                                </div> */}\n                                <div className=\"video-mute-icon end-call\" title=\"End Call\">\n                                    <i className=\"fas fa-phone fa-fw CBicon\" id=\"disconnect_call\"></i>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    )\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}