(this["webpackJsonpvcx-react"]=this["webpackJsonpvcx-react"]||[]).push([[0],{20:function(e,t,a){e.exports=a(35)},25:function(e,t,a){},27:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),l=a.n(o),c=(a(25),a(26),a(10)),i=a(1),s=(a(27),window.EnxRtc);function m(e){var t,a,o,l=Object(i.f)().token,c=[],m=!1,d=!1,u=null,v=new Map,f={video:!0,audio:!0,data:!0,videoSize:[640,480,640,480]};a={player:{height:"150px",width:"150px",minHeight:"150px",minWidth:"150px"},toolbar:{displayMode:!1},resizer:!1},o={player:{height:"100%",width:"100%"},resizer:!1,toolbar:{displayMode:!1}},Object(n.useEffect)((function(){E()}),[]);var p=function(e){e.removeAttribute("disabled"),e.style.cursor="pointer",e.style.pointerEvents="auto"},E=function(){console.log("joining the room..."),document.querySelector("#local_view").classList.add("local_class_peep"),document.querySelector("#remote_view").classList.add("remote_class_peep");var e=document.querySelector("#self_vMute");s.Logger.setLogLevel(0),t=s.joinRoom(l,f,(function(e,n){if(n&&null==n&&(document.querySelector(".error_div").innerHTML="Room connection error."+n.message),e&&null!==e){t.play("self-view",a),u=e.room,"moderator"===u.me.role;for(var r=e.publishId,l=0;l<e.streams.length;l++)u.subscribe(e.streams[l]);u.addEventListener("active-talkers-updated",(function(e){console.log("Active Talker List :- "+JSON.stringify(e));var t=document.querySelector("#call_div").childNodes;if(c=e.message.activeList,e.message&&null!==e.message&&e.message.activeList&&null!==e.message.activeList&&(0===c.length&&(document.querySelector("#call_div").innerHTML="",document.querySelector(".remote-name").innerText=""),v.size>0)){if(t.length>=1)return;for(var a in u.remoteStreams.getAll())for(var n=u.remoteStreams.getAll()[a],r=0;r<c.length;r++)c[r].streamId===n.getID()&&(n,document.querySelector(".self-name").innerHTML=u.me.name,n.play("call_div",o),document.querySelector(".remote-name").innerHTML=c[r].name)}})),u.addEventListener("room-record-on",(function(){document.querySelector("#rec_notification").style.display="block"})),u.addEventListener("room-record-off",(function(){document.querySelector("#rec_notification").style.display="none"})),u.addEventListener("stream-subscribed",(function(e){e.stream.getID()!==r&&v.set(e.stream.getID(),e.stream)})),u.addEventListener("user-disconnected",(function(e){document.querySelector("#call_div").innerHTML="",document.querySelector(".remote-name").innerText=""})),u.addEventListener("room-disconnected",(function(e){window.location.href="/"}))}})),document.querySelector("#self_aMute").addEventListener("click",(function(e){m?u.mute?console.log("Your audio is muted by moderator"):t.unmuteAudio((function(e){document.querySelector("#self_aMute").classList.remove("fa-microphone-slash"),document.querySelector("#self_aMute").classList.add("fa-microphone"),m=!1})):t.muteAudio((function(e){document.querySelector("#self_aMute").classList.remove("fa-microphone"),document.querySelector("#self_aMute").classList.add("fa-microphone-slash"),m=!0}))})),document.querySelector("#disconnect_call").addEventListener("click",(function(){u.disconnect()})),document.querySelector("#mute_video").addEventListener("click",(function(){e.style.cursor="wait",e.style.pointerEvents="none",e.disabled=!0,e.setAttribute("disabled","disabled"),d?t.unmuteVideo((function(t){0===t.result?(document.querySelector("#self_vMute").classList.remove("fa-video-slash"),document.querySelector("#self_vMute").classList.add("fa-video"),d=!1,p(e)):1140===t.result&&(console.error(t.error),p(e))})):t.muteVideo((function(t){0===t.result?(document.querySelector("#self_vMute").classList.remove("fa-video"),document.querySelector("#self_vMute").classList.add("fa-video-slash"),d=!0,p(e)):1140===t.result&&p(e)}))}))};return r.a.createElement("div",null,r.a.createElement("div",{className:"layout"},r.a.createElement("div",{id:"overlay",style:{display:"none"}},r.a.createElement("div",{className:"loader",style:{width:"50px"}},r.a.createElement("img",{src:"./img/loading.gif",alt:""}))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row p-0 m-0",id:"call_container_div"},r.a.createElement("div",{className:"local_class_peep",id:"local_view"},r.a.createElement("div",{id:"self-view"}),r.a.createElement("div",{className:"self-name"},"Local User")),r.a.createElement("div",{className:"remote_class_peep",id:"remote_view"},r.a.createElement("div",{id:"call_div"}),r.a.createElement("div",{id:"show_stream_div"}),r.a.createElement("div",{className:"remote-name"},"Remote User")),r.a.createElement("div",{className:"toolbar-buttons"},r.a.createElement("div",{className:"tools"},r.a.createElement("div",{className:"mute-icon",id:"mute_audio",title:"Mute/Unmute Audio"},r.a.createElement("i",{className:"fa fa-microphone",id:"self_aMute"})),r.a.createElement("div",{className:"video-mute-icon",id:"mute_video",title:"Mute/Unmute Video"},r.a.createElement("i",{className:"fa fa-video",id:"self_vMute"})),r.a.createElement("div",{className:"video-mute-icon end-call",title:"End Call"},r.a.createElement("i",{className:"fas fa-phone fa-fw CBicon",id:"disconnect_call"}))))))))}var d=a(6),u=a(11),v=a(9),f=a.n(v),p=a(15),E={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Basic "+btoa("demo:enablex")}},h=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.assign(E,{method:"POST",body:""}),e.next=3,fetch("https://YOUR_API_URL/createRoom/",E);case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.assign(E,{method:"POST",body:JSON.stringify(t)}),e.next=3,fetch("https://YOUR_API_URL/createToken/",E);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function y(){return r.a.createElement("header",null,r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("a",{className:"navbar-brand",href:"https://www.enablex.io/"},r.a.createElement("img",{src:"./enableX_logo.png",alt:"EnableX"})),r.a.createElement("div",{className:"navbar-collapse collapse nav justify-content-end"},r.a.createElement("ul",{className:"nav justify-content-end ton-hedr-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#",className:"nav-link login text-dark"},"Sample Code ",r.a.createElement("span",{className:"fa fa-code"}))))))))}a(34);var b=function(e){var t=Object(n.useState)({name:"",room:"",role:""}),a=Object(u.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)(""),i=Object(u.a)(c,2),s=(i[0],i[1],Object(n.useState)(!1)),m=Object(u.a)(s,2),v=m[0],f=m[1];return r.a.createElement("main",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"col-12 col-md-12 col-xl-6 col-lg-6 form-hedding"},r.a.createElement("h1",null,"1-To-1 Video Call"),r.a.createElement("p",null,"This Sample Code showcases how EnableX Video Service may be used to create a 1-to-1 Video Call Application. The Login Screen explains all basic information is needed to get a EnableX Token to get you connected to a Live Video Session. You may need to create your Access Processes to give a EnableX Token to your User."),r.a.createElement("h4",null,"Tech Specs"),r.a.createElement("p",null,r.a.createElement("strong",null,"Web Toolkit: ")," v",r.a.createElement("span",{id:"version_num"},"1.5")," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Client Application:")," HTML5, CSS, JavaScript ",r.a.createElement("br",null),r.a.createElement("strong",null,"Application Server:")," NodeJS")),r.a.createElement("div",{className:"col-12 col-md-12 col-xl-5 col-lg-5 offset-md-1"},r.a.createElement("div",{className:"form-bg login_join_div",style:{display:"block",paddingBottom:"25px"}},r.a.createElement("h2",{className:"text-center"},"Start a Video Call"),r.a.createElement("div",{style:{display:"none"},className:"loading text-center"},"Loading...."),r.a.createElement("form",{className:"mt-4",id:"login_form",onSubmit:function(e){e.preventDefault(),f(!0),console.log("Enter room....");var t={name:o.name,role:o.role,roomId:o.room,user_ref:o.name};g(t).then((function(e){window.location="/room/"+e.token})).catch((function(e){console.log(e)}))}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("input",{type:"text",className:"form-control",id:"nameText",name:"nameText",placeholder:"Name",onChange:function(e){return l(Object(d.a)(Object(d.a)({},o),{},{name:e.target.value}))},value:o.name,required:!0}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("input",{type:"text",className:"form-control",id:"roomName",name:"roomName",onChange:function(e){return l(Object(d.a)(Object(d.a)({},o),{},{room:e.target.value}))},value:o.room,placeholder:"Room ID",required:!0}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("select",{className:"selectpicker show-menu-arrow form-control",id:"attendeeRole",onChange:function(e){return l(Object(d.a)(Object(d.a)({},o),{},{role:e.target.value}))},value:o.role,name:"attendeeRole",required:!0},r.a.createElement("option",{value:""},"Select Role"),r.a.createElement("option",{value:"participant"},"Join as Participant"),r.a.createElement("option",{value:"moderator"},"Join as Moderator")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-12"},r.a.createElement("input",{type:"checkbox",name:"agree",style:{height:"15px",width:"15px"},defaultChecked:!0,required:!0}),r.a.createElement("label",null,"I agree to ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.enablex.io/legals/tou/"},"Terms of Use")," and",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.enablex.io/legals/privacy-policy/"},"Privacy Policy")))),r.a.createElement("div",{className:"form-row justify-content-start"},r.a.createElement("div",{className:"form-group col-12 checkbox-sec"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",id:"joinRoom"},v?"Wait...":"Sign In")),r.a.createElement("div",{id:"create_room_div"},r.a.createElement("hr",null),r.a.createElement("p",{className:"text-center"},"Don't have a Room-ID?",r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),f(!0),h().then((function(e){0===e.result&&(l(Object(d.a)(Object(d.a)({},o),{},{room:e.room.room_id})),f(!1))})).catch((function(e){return console.log(e)}))},id:"create_room"},v?"Wait...":"Create One"))),r.a.createElement("br",null),r.a.createElement("span",{id:"message",style:{color:"red"}}))))))))),r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("ul",{className:"footerUl"},r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.enablex.io/legals/tou/"},"Terms")),r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.enablex.io/legals/privacy-policy/"},"Privacy Policy")))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("p",{className:"footer-p"},"Copyright \xa9 VCLOUDX PTE LTD. All rights reserved."))))))};var N=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(b,null)),r.a.createElement(i.a,{path:"/room/:token",children:r.a.createElement(m,null)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.940bb0bc.chunk.js.map